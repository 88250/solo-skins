var Skin={init:function(){$("#headerDown").click(function(){$("html, body").animate({scrollTop:$(window).height()},300)}),$(window).scroll(function(e){$(".fn__progress").attr("value",parseInt($(window).scrollTop())).attr("max",parseInt($("body").outerHeight()-$(window).height())),$(window).scrollTop()>$(window).height()/2-20?($(".side__menu").addClass("side__menu--edge"),$(".side__top").removeClass("side__top--bottom")):($(".side__menu").removeClass("side__menu--edge"),$(".side__top").addClass("side__top--bottom"))}),$(".side__menu").click(function(){$(".side__main").addClass("side__main--show").show()}),$(".side__bg, .side__close").click(function(){$(".side__main").removeClass("side__main--show"),setTimeout(function(){$(".side__main").hide()},1e3)}),$(".side__top").click(function(){$(this).hasClass("side__top--bottom")?Util.goBottom():Util.goTop()});var e=0,i=$(".header__h1").text();document.addEventListener("visibilitychange",function(){e&&clearTimeout(e),e=document.hidden?setTimeout(function(){document.title="(◍´꒳`◍) - "+i},500):(document.title="(*´∇｀*) 欢迎回来！",setTimeout(function(){document.title=i},1e3))},!1),$(window).scroll(),new Ribbons({colorSaturation:"60%",colorBrightness:"50%",colorAlpha:.5,colorCycleSpeed:5,verticalPosition:"random",horizontalSpeed:200,ribbonCount:3,strokeSize:0,parallaxAmount:-.2,animateSections:!0}),1!==$("#comments").length&&$(".header").circleMagic({clearOffset:.3,color:"rgba(255,255,255, .2)",density:.2,radius:15})},initArticle:function(){page.share(),initCanvas("articleTop");var a=$(".vditor-reset [id^=b3_solo_h]"),r=$(".article__toc");r.find("a").click(function(e){var i=$(this).attr("href");return window.location.hash=i,$(window).scrollTop($(i).offset().top),e.preventDefault(),e.stopPropagation(),!1}),$(window).scroll(function(e){if(0===$(".article__toc li").length)return!1;var i=[];a.each(function(e){i.push({id:this.id,offsetTop:$(this).offset().top})});for(var o=$(window).scrollTop(),t=0,n=i.length;t<n;t++)if(o<i[t].offsetTop){r.find("li").removeClass("current");var s=0<t?t-1:0;r.find('a[href="#'+i[s].id+'"]').parent().addClass("current");break}o>=i[i.length-1].offsetTop&&(r.find("li").removeClass("current"),r.find("li:last").addClass("current"))})}};$(document).ready(function(){Skin.init()});